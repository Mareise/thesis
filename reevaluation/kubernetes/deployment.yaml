apiVersion: apps/v1
kind: Deployment
metadata:
  name: gpu-analyzer
  namespace: default
spec:
  replicas: 1
  selector:
    matchLabels:
      app: gpu-analyzer
  template:
    metadata:
      labels:
        app: gpu-analyzer
    spec:
      containers:
        - name: analyzer
          image: maxireis/knative-reevaluation:latest
          imagePullPolicy: Always
          env:
            # Prometheus configuration
            - name: PROMETHEUS_URL
              value: "http://prometheus-kube-prometheus-prometheus:9090"

            # Timing configuration (interval has to be significantly lower than window)
            - name: INTERVAL_SECONDS
              value: "61"
            - name: WINDOW_MINUTES
              value: "30"

            # Logging configuration
            - name: LOG_LEVEL
              value: "DEBUG"
